<!DOCTYPE html>
<html lang="en">

<head>
    <title>ALIBI.COM</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            background: #f5f6f7;
            font-family: "Nunito", sans-serif;
        }

        main {
            height: 100vh;
            width: 100%;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
            position: relative;
        }
    </style>
    <link rel="stylesheet" href="../css/style.css">
    <link rel="icon" href="../images/petitlogo.png">
</head>

<body style="background-color: lightblue;">
    <main>
        <div class="stepper">
            <div class="step--1 step-active">Etape 1</div>
            <div class="step--2">Etape 2</div>
            <div class="step--3">Etape 3</div>
            <div class="step--4">Etape 4</div>
            <div class="step--5">Fin</div>
        </div>

        <form class="form form-active">
            <div class="form--header-container">
                <h1 class="form--header-title">Entrez votre Nom, votre Pr√©nom et votre √¢ge</h1>
                <h2 class="form--header-text">Ces informations restent confidentielles mais elle sont utiles pour la formation des com√©diens</h2>
            </div>
            <label for="Nom">Nom :</label>
            <input type="text" id="Nom" name="Nom"></input>

            <br>

            <label for="Prenom">Prenom :</label>
            <input type="text" id="Prenom" name="Prenom"></input>

            <br>

            <label for="Age">Veuillez saisir votre age :</label>
            <input type="range" name="d" value="18" min="18" max="99" step="1" oninput="result4.value=parseInt(d.value) + ' ans'">
            <script>
                $(function() {
                    $('.range').next().text('18');
                    $('.range').on('input', function() {
                        var $set = $(this).val();
                        $(this).next().text($set);
                    });
                });
            </script>
            <output name="result4">18 ans</output>

            <br>

            <button class="form__btn" id="btn-1">Continuer</button>
        </form>

        <form class="form">
            <div class="form--header-container">
                <h1>Entrez votre adresse email</h1>
                <h2>Nous vous conseillons d'utiliser une adresse email secondaire, ou cach√©e</h2>
            </div>

            <label for="email">Email :</label>
            <input type="email" id="Email" placeholder="exemple@email.com"></input>
            <br>
            <button class="form__btn" id="btn-2-prev">Pr√©c√©dent</button>
            <button class="form__btn" id="btn-2-next">Continuer</button>
        </form>

        <form class="form">
            <div class="form--header-container">
                <h1>Nous avons besoin de votre num√©ro de t√©l√©phone</h1>
                <h2>Nous sommes susceptibles de vous envoyer des messages cod√©s</h2>
            </div>

            <label for="tel">Num√©ro de t√©l√©phone : +33</label>
            <input type="tel" id="Tel" maxlength="9"></input>
            <br>
            <button class="form__btn" id="btn-3-prev">Pr√©c√©dent</button>
            <button class="form__btn" id="btn-3-next">Continuer</button>
        </form>

        <form class="form">
            <div class="form--header-container">
                <h1>De quoi avez-vous besoin ?</h1>
                <h2>Choisissez "Alibi personnalis√©" si nous ne proposons pas ce que vous souhaitez</h2>
            </div>
            <select name="Select" id="Service">
                <option selected>- Choisir une option -</option>
                <option>Alibi d'absence</option>
                <option>Alibi de retard</option>
                <option>Alibi d'√©v√©nement</option>
                <option>Alibi de relation</option>
                <option>Alibi personnalis√©</option>
            </select>

            <br>
            <br>

            <div id="Alibi" style="display: none;">
                <div class="number">
                    <label for="number">Nombre de com√©dien(s) que vous pensez n√©cessaire</label>
                    <input type="number" id="Nombre" min="1" max="10" value="1" required></input>
                </div>
                <br>
                <div class="autre">
                    <textarea id="Commentaire" placeholder="expliquez votre probl√®me ainsi que la solution que vous souhaitez, nous vous recontacterons si votre demande est faisable"></textarea>
                </div>
            </div>
            <script>
                const selectElem = document.getElementById("Service");
                const toChange = document.getElementById("Alibi");

                if (selectElem.selectedIndex == 5) {
                    toChange.style.display = 'block';
                } else {
                    toChange.style.display = 'none';
                }

                selectElem.addEventListener("change", () => {
                    const AlibiElement = selectElem.selectedIndex;
                    if (AlibiElement == 5) {
                        toChange.style.display = 'block';
                    } else {
                        toChange.style.display = 'none';
                    }
                })
            </script>
            <br>

            <input type="checkbox"> En cochant cette case, vous acceptez nos <a style="cursor: pointer; color: darkblue; text-decoration: underline;" onclick="alert(`Pas de termes de conditions ou d'utilisation üëç`)">termes d'utilisation du site et nos conditions</a></input>

            <button class="form__btn" id="btn-4-prev">Pr√©c√©dent</button>
            <button class="form__btn" id="btn-4">Soumettre</button>
        </form>

        <div class="form--message"></div>
    </main>

    <script>
        const formBtn1 = document.querySelector("#btn-1")
        const formBtnPrev2 = document.querySelector("#btn-2-prev")
        const formBtnNext2 = document.querySelector("#btn-2-next")
        const formBtnPrev3 = document.querySelector("#btn-3-prev")
        const formBtnNext3 = document.querySelector("#btn-3-next")
        const formBtnPrev4 = document.querySelector("#btn-4-prev")
        const formBtn4 = document.querySelector("#btn-4")

        // Button listener of form 1
        formBtn1.addEventListener("click", function(e) {
            gotoNextForm(formBtn1, formBtnNext2, 1, 2)
            e.preventDefault()
        })

        // Next button listener of form 2
        formBtnNext2.addEventListener("click", function(e) {
            gotoNextForm(formBtnNext2, formBtnNext3, 2, 3)
            e.preventDefault()
        })

        // Previous button listener of form 2
        formBtnPrev2.addEventListener("click", function(e) {
            gotoNextForm(formBtnNext2, formBtn1, 2, 1)
            e.preventDefault()
        })

        // Next button listener of form 3
        formBtnNext3.addEventListener("click", function(e) {
            gotoNextForm(formBtnNext3, formBtn4, 3, 4)
            e.preventDefault()
        })

        // Previous button listener of form 3
        formBtnPrev3.addEventListener("click", function(e) {
            gotoNextForm(formBtnNext3, formBtnPrev2, 3, 2)
            e.preventDefault()
        })

        // Previous button listener of form 4
        formBtnPrev4.addEventListener("click", function(e) {
            gotoNextForm(formBtn4, formBtnPrev3, 4, 3)
            e.preventDefault()
        })

        // Button listener of form 4
        formBtn4.addEventListener("click", function(e) {
            document.querySelector(`.step--4`).classList.remove("step-active")
            document.querySelector(`.step--5`).classList.add("step-active")
            formBtn4.parentElement.style.display = "none"
            let chosen = document.getElementById("Service")
            let prix = GetPrice()
            document.querySelector(".form--message").innerHTML = `
            <div class="form--message-text">
                <h1>Merci, nous vous recontacterons apr√®s la validation de votre commande</h1>
                <br>
                <h2>Votre commande : `.concat(chosen.options[chosen.selectedIndex].text, `</h2>
                <br>
                <h2>Prix estim√© : `.concat(prix, `‚Ç¨</h2>
                <br>
                <button class="form__btn" onclick="location.href='formulaire.html'">Retour</button>
                <button class="form__btn" onclick="location.href='index.html'">Valider</button>
            </div>`))
            e.preventDefault()
        })

        const gotoNextForm = (prev, next, stepPrev, stepNext) => {
            // Get form through the button
            const prevForm = prev.parentElement
            const nextForm = next.parentElement
            const nextStep = document.querySelector(`.step--${stepNext}`)
            const prevStep = document.querySelector(`.step--${stepPrev}`)
            // Add active/inactive classes to both previous and next form
            nextForm.classList.add("form-active")
            if (stepNext > stepPrev) {
                nextForm.classList.add("form-active-animate-next")
                prevForm.classList.add("form-inactive-animate-next")
            } else {
                nextForm.classList.add("form-active-animate-prev")
                prevForm.classList.add("form-inactive-animate-prev")
            }
            // Change the active step element
            prevStep.classList.remove("step-active")
            nextStep.classList.add("step-active")
            // Remove active/inactive classes to both previous and next form
            setTimeout(() => {
                prevForm.classList.remove("form-active")
                if (stepNext > stepPrev) {
                    nextForm.classList.remove("form-active-animate-next")
                    prevForm.classList.remove("form-inactive-animate-next")
                } else {
                    nextForm.classList.remove("form-active-animate-prev")
                    prevForm.classList.remove("form-inactive-animate-prev")
                }
            }, 1000)
        }

        function GetPrice() {
            let service = document.getElementById("Service");
            let chosen = service.options[service.selectedIndex].text;

            // Prix fixe de 300‚Ç¨ + 100‚Ç¨ par acteur impliqu√©

            if (chosen == "Alibi personnalis√©") {
                return (300 + ((document.getElementById("Nombre").value) - 1) * 100)
            } else {
                return 300
            }
        }
    </script>
    <script src="../javascript/script.js"></script>
</body>

</html>